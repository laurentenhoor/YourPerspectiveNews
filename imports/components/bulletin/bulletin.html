<div id="scroll-container" class="bulletin-items-scroll-container"
	ng-repeat="topic in $ctrl.topics | orderBy:'-createdAt'" ng-init="topic.selectedArticle = {}">

	<div class="bulletin-item-outer-container"
	ng-repeat="newsItem in topic.articlesByCategory | orderBy:'sortingOrder'" 
	ng-init="category=newsItem.category; 
	articles=$ctrl.getArticlesByIds(newsItem.articleIds);
	selectedArticle = $ctrl.getArticleWithHighestScore(articles);
	topic.selectedArticle[category]=selectedArticle;
	selectedArticleId = selectedArticle._id;
	$ctrl.selectedArticleId = selectedArticle._id;
	$ctrl.loadedArticles= $ctrl.loadedArticles.concat(newsItem.articleIds);
	"
	ng-show="articles.length>0"
	>
	
		<div class="bulletin-item-header">{{category}}</div>

		<div class="bulletin-item-image-and-details-container">

			<div class="bulletin-item-image-container">
			
				<div class="remove-icon" ng-click="$ctrl.remove(topic, topic.selectedArticle[category])">
					<i class="material-icons">delete</i>
				</div>
				
				<div class="bulletin-voting" ng-init="" ng-if="true">
					<div ng-click="$ctrl.vote(topic.selectedArticle[category],1)" class="bulletin-arrow-up" 
						ng-class="{true: 'bulletin-upvoted', false: ''}[$ctrl.userVoteMap[topic.selectedArticle[category]._id]==1]"></div>
					<div class="bulletin-vote-score">{{$ctrl.articlesScoreMap[topic.selectedArticle[category]._id] || 0}}</div>
					<div ng-click="$ctrl.vote(topic.selectedArticle[category],-1)" class="bulletin-arrow-down" 
						ng-class="{true: 'bulletin-downvoted', false: ''}[$ctrl.userVoteMap[topic.selectedArticle[category]._id]==-1]"></div>
				</div>
				
				<div class="bulletin-item-image" 
				ng-style="{'background-image':'url(\'' + topic.selectedArticle[category].imageUrl + '\')'}"
				style="background-color:{{ topic.selectedArticle[category].videoUrl ? 'black' : 'white' }}">
				</div>
				
				<iframe ng-if="topic.selectedArticle[category].videoUrl" 
				src="{{topic.selectedArticle[category].videoUrl}}"
					width="100%" height="60%" frameborder="0" allowfullscreen
					style="bottom: 16%; position: absolute; left: 0px;"></iframe>

				<div class="gradient-overlay"></div>

				<a ng-href="{{topic.selectedArticle[category].url}}" target="_self">
					<div class="bulletin-item-title-container">
						
						<div class="bulletin-item-publisher">
							{{topic.selectedArticle[category].publisher}}
						</div>
						
						<div class="bulletin-item-title">
							{{topic.selectedArticle[category].title}}
							
						</div>
							
					</div>
				</a>

			</div>
			
			<a ng-href="{{topic.selectedArticle[category].url}}" target="_self">
				<div class="bulletin-item-description" ng-if="topic.selectedArticle[category].description">
					{{topic.selectedArticle[category].description}}</div>
			</a>

			<div class="bulletin-sources">
				
				<yourpers-add-article topic-id="topic._id" data="newsItem"
					class="add-article-from-bulletin-item" ng-click="$ctrl.click(topic._id)">
				</yourpers-add-article>
				
				<div class="bulletin-source"
					ng-repeat="article in articles | orderBy:'-score'"
					ng-click="$ctrl.clickArticle(topic, category, article)"
					ng-class="(article._id == topic.selectedArticle[category]._id) ? 'bulletin-source-selected':''"
					style="background-image: url({{article.logoUrl}})">
				</div>
			</div>

		</div>

	</div>

</div>