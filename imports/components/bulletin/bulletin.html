<div id="scroll-container" class="bulletin-items-scroll-container"
	ng-repeat="topic in $ctrl.topics | orderBy:'-createdAt'" ng-init="topic.selectedArticle = {}">

	<div class="bulletin-item-outer-container"
	ng-repeat="newsItem in topic.articlesByCategory | orderBy:'sortingOrder'" 
	ng-init="category=newsItem.category; 
	articles=newsItem.articles; 
	articleIds=newsItem.articleIds; 
	topic.selectedArticle[category]=$ctrl.getArticleById(articleIds[articleIds.length-1])"
	>
	
		<div class="bulletin-item-header">{{category}}</div>

		<div class="bulletin-item-image-and-details-container">

			<div class="bulletin-item-image-container">
			
				<div class="remove-icon" ng-click="$ctrl.remove(topic, topic.selectedArticle[category])">
					<i class="material-icons">delete</i>
				</div>
				
				<div class="bulletin-voting" ng-init="voteValue=$ctrl.getUserVoteByArticleId(topic.selectedArticle[category]._id)" ng-if="true">
					<div ng-click="$ctrl.vote(topic.selectedArticle[category],1)" class="bulletin-arrow-up" 
						ng-class="{true: 'bulletin-upvoted', false: ''}[voteValue==1]"></div>
					<div class="bulletin-vote-score">{{topic.selectedArticle[category].score || 0}}</div>
					<div ng-click="$ctrl.vote(topic.selectedArticle[category],-1)" class="bulletin-arrow-down" 
						ng-class="{true: 'bulletin-downvoted', false: ''}[voteValue==-1]"></div>
				</div>					
				
				<div class="bulletin-item-image" 
				ng-style="{'background-image':'url(\'' + topic.selectedArticle[category].imageUrl + '\')'}">
				</div>
				
				<iframe ng-if="topic.selectedArticle[category].videoUrl" 
				src="{{topic.selectedArticle[category].videoUrl}}"
					width="100%" height="60%" frameborder="0" allowfullscreen
					style="bottom: 16%; position: absolute; left: 0px;"></iframe>

				<div class="gradient-overlay"></div>

				<a ng-href="{{topic.selectedArticle[category].url}}" target="_self">
					<div class="bulletin-item-title-container">
						
						<div class="bulletin-item-publisher">
							{{topic.selectedArticle[category].publisher}}
						</div>
						
						<div class="bulletin-item-title">
							{{topic.selectedArticle[category].title}}
						</div>
						
					</div>
				</a>
		

			</div>
			
			<a ng-href="{{topic.selectedArticle[category].url}}" target="_self">
				<div class="bulletin-item-description" ng-if="topic.selectedArticle[category].description">
					{{topic.selectedArticle[category].description}}</div>
			</a>

			<div class="bulletin-sources">
				
				<yourpers-add-article topic-id="topic._id" data="newsItem"
					class="add-article-from-bulletin-item" ng-click="$ctrl.click(topic._id)">
				</yourpers-add-article>
			
				<div class="bulletin-source"
					ng-repeat="articleId in articleIds | orderBy:'-createdAt'"
					ng-init="article=$ctrl.getArticleById(articleId)"
					ng-click="$ctrl.clickArticle(topic, category, article)"
					ng-class="(article == topic.selectedArticle[category]) ? 'bulletin-source-selected':''"
					style="background-image: url({{article.logoUrl}})">
				</div>
			</div>

		</div>

	</div>

</div>